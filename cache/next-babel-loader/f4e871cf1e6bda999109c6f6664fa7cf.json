{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Box, Avatar, Text, Divider, IconButton, Column, Button, Link } from \"gestalt\";\nimport { TiHomeOutline, TiChartAreaOutline, TiCalendarOutline, TiTags, TiShoppingCart } from \"react-icons/ti\";\nimport Router from 'next/router';\nimport Home from '../components/home';\nimport Ranking from '../components/ranking';\nimport Event from '../components/event';\nimport Mission from '../components/mission';\nimport Shopping from '../components/shopping';\nimport Profile from '../components/profile';\nimport Info from '../components/info';\nimport 'gestalt/dist/gestalt.css';\nimport './index.css';\n\nvar Main =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Main, _React$Component);\n\n  function Main(props) {\n    var _this;\n\n    _classCallCheck(this, Main);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Main).call(this, props));\n    _this.state = {\n      route: \"home\",\n      id: \"\",\n      data: [],\n      name: \"\",\n      family: \"Book Family\",\n      rank: \"\",\n      score: 0,\n      avatar: \"\",\n      cover: \"\",\n      allPackages: [],\n      familyPackages: [],\n      childrenPackages: [],\n      competitionPackages: [],\n      entertainmentPackages: []\n    };\n    return _this;\n  }\n\n  _createClass(Main, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var token = localStorage.getItem('token');\n\n      if (token) {\n        fetch('https://savacloud.herokuapp.com/verify', {\n          method: \"GET\",\n          headers: {\n            'Accept': 'application/json, text/plain, */*',\n            'Content-Type': 'application/json',\n            'Authorization': token\n          }\n        }).then(function (result) {\n          if (result.status === 200) return result.json();else throw Error(\"lỗi đăng nhập\");\n        }).then(function (result) {\n          if (result.error) throw Error(\"lỗi token\");\n\n          _this2.fetchData();\n        })[\"catch\"](function (e) {\n          localStorage.removeItem('token');\n          Router.push('/login');\n        });\n      } else Router.push('/login');\n    }\n  }, {\n    key: \"fetchData\",\n    value: function fetchData() {\n      var _this3 = this;\n\n      var decode = atob(window.localStorage.getItem('token').split('.')[1]);\n      var info = JSON.parse(decode);\n      this.setState({\n        id: info.userId,\n        data: [{\n          label: \"Khả năng\",\n          backgroundColor: \"rgb(145, 229, 246, 0.5)\",\n          borderColor: 'rgb(54, 162, 235)',\n          data: [info.info.math, info.info.physic, info.info.chemistry, info.info.literature, info.info.history, info.info.geography, info.info.skill, info.info.linked],\n          fill: 'origin'\n        }],\n        name: decodeURIComponent(escape(info.info.name)),\n        family: \"Book Family\",\n        rank: \"\",\n        score: info.info.scores,\n        avatar: info.info.avatar,\n        cover: info.info.cover\n      });\n\n      _Promise.all([fetch('https://script.google.com/macros/s/AKfycbxXAz_BiTl-g4fVcN_5_HwouklaD1XMrF1CXMYWO4dp0VgHi10/exec').then(function (result) {\n        return result.json();\n      }).then(function (result) {\n        _this3.setState({\n          ads: result.result\n        });\n      }), fetch('https://script.google.com/macros/s/AKfycbxhPOYd6asdd_w9c6iB3CCdzsg4VYzFh7qKgZiNi-IKlcOo665O/exec').then(function (result) {\n        return result.json();\n      }).then(function (result) {\n        _this3.setState({\n          events: result.result\n        });\n      }), fetch('https://script.google.com/macros/s/AKfycbwgXrL-ZO5fryEonD6VWLJhsaxZg2VtaH-A9rLIoNZLLkQWTfM/exec').then(function (result) {\n        return result.json();\n      }).then(function (result) {\n        _this3.setState({\n          allPackages: result.result\n        });\n\n        result.result.map(function (ele, index) {\n          switch (ele.packageType) {\n            case 'FAMILY':\n              _this3.setState({\n                familyPackages: [].concat(_toConsumableArray(_this3.state.familyPackages), [index])\n              });\n\n              break;\n\n            case 'CHILDREN':\n              _this3.setState({\n                childrenPackages: [].concat(_toConsumableArray(_this3.state.childrenPackages), [index])\n              });\n\n              break;\n\n            case 'COMPETITION':\n              _this3.setState({\n                competitionPackages: [].concat(_toConsumableArray(_this3.state.competitionPackages), [index])\n              });\n\n              break;\n\n            case 'ENTERTAINMENT':\n              _this3.setState({\n                entertainmentPackages: [].concat(_toConsumableArray(_this3.state.entertainmentPackages), [index])\n              });\n\n              break;\n          }\n        });\n      })]).then(function (result) {\n        console.log(_this3.state);\n      });\n    }\n  }, {\n    key: \"changeRoute\",\n    value: function changeRoute(route) {\n      this.setState({\n        route: route\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return __jsx(Box, {\n        height: \"100vh\",\n        width: \"100%\"\n      }, this.state.route === \"info\" ? __jsx(Box, {\n        alignItems: \"center\",\n        direction: \"row\",\n        display: \"flex\",\n        width: \"100%\",\n        height: \"4rem\",\n        paddingY: 2,\n        color: \"white\"\n      }, __jsx(Column, {\n        span: 3\n      }, __jsx(Box, {\n        paddingX: 2\n      }, __jsx(IconButton, {\n        icon: \"arrow-back\",\n        onClick: function onClick(e) {\n          _this4.changeRoute('home');\n        },\n        accessibilityLabel: \"back\"\n      }))), __jsx(Column, {\n        span: 5\n      }), __jsx(Column, {\n        span: 4\n      }, __jsx(Box, {\n        paddingX: 2\n      }, __jsx(Link, {\n        href: \"/game\"\n      }, __jsx(Button, {\n        text: \"Tham gia\",\n        color: \"blue\"\n      }))))) : this.state.route === \"profile\" ? __jsx(Box, {\n        alignItems: \"center\",\n        direction: \"row\",\n        display: \"flex\",\n        width: \"100%\",\n        height: \"4rem\",\n        paddingY: 2,\n        color: \"white\"\n      }, __jsx(Column, {\n        span: 3\n      }, __jsx(Box, {\n        paddingX: 2\n      }, __jsx(IconButton, {\n        icon: \"arrow-back\",\n        onClick: function onClick(e) {\n          _this4.changeRoute('home');\n        },\n        accessibilityLabel: \"back\"\n      }))), __jsx(Column, {\n        span: 4\n      }), __jsx(Column, {\n        span: 5\n      }, __jsx(Box, {\n        paddingX: 2\n      }, __jsx(Link, {\n        href: \"/login\"\n      }, __jsx(Button, {\n        text: \"\\u0110\\u0103ng xu\\u1EA5t\",\n        color: \"red\",\n        onClick: function onClick(e) {\n          localStorage.removeItem('token');\n        }\n      }))))) : __jsx(Box, {\n        alignItems: \"center\",\n        direction: \"row\",\n        display: \"flex\",\n        width: \"100%\",\n        height: \"3rem\",\n        paddingY: 2,\n        color: \"white\"\n      }, __jsx(Box, {\n        paddingX: 2,\n        width: \"4\"\n      }, __jsx(\"div\", {\n        onClick: function onClick(e) {\n          return _this4.changeRoute('profile');\n        }\n      }, __jsx(Avatar, {\n        name: this.state.name,\n        size: \"sm\",\n        src: this.state.avatar\n      }))), __jsx(Box, null, __jsx(Text, null, \" xin ch\\xE0o \")), __jsx(Box, {\n        paddingX: 1\n      }, __jsx(Text, {\n        weight: \"bold\"\n      }, \" \", this.state.name, \" \"))), __jsx(Divider, null), __jsx(Divider, null), __jsx(Box, {\n        height: \"calc(100vh - 3rem - 3.8rem)\",\n        width: \"100%\",\n        overflow: \"scrollY\"\n      }, this.state.route === \"home\" ? __jsx(Home, _extends({\n        onGoShopping: function onGoShopping() {\n          return _this4.changeRoute('shopping');\n        },\n        onGoInfo: function onGoInfo(index) {\n          return _this4.changeRoute('info');\n        }\n      }, this.state)) : this.state.route === \"ranking\" ? __jsx(Ranking, this.state) : this.state.route === \"event\" ? __jsx(Event, this.state) : this.state.route === \"mission\" ? __jsx(Mission, this.state) : this.state.route === \"shopping\" ? __jsx(Shopping, this.state) : this.state.route === \"profile\" ? __jsx(Profile, this.state) : __jsx(Info, this.state)), __jsx(Divider, null), __jsx(Divider, null), __jsx(Box, {\n        position: \"fixed\",\n        bottom: true,\n        left: true,\n        direction: \"row\",\n        display: \"flex\",\n        width: \"100%\",\n        height: \"3.6rem\",\n        color: \"white\"\n      }, __jsx(Box, {\n        justifyContent: \"center\",\n        width: \"20%\",\n        display: \"flex\",\n        alignItems: \"center\"\n      }, __jsx(TiHomeOutline, {\n        size: \"27\",\n        color: this.state.route === \"home\" ? \"#59a5d8\" : \"#8e8e8e\",\n        onClick: function onClick(e) {\n          return _this4.changeRoute('home');\n        }\n      })), __jsx(Box, {\n        justifyContent: \"center\",\n        width: \"20%\",\n        display: \"flex\",\n        alignItems: \"center\"\n      }, __jsx(TiChartAreaOutline, {\n        size: \"27\",\n        color: this.state.route === \"ranking\" ? \"#59a5d8\" : \"#8e8e8e\",\n        onClick: function onClick(e) {\n          return _this4.changeRoute('ranking');\n        }\n      })), __jsx(Box, {\n        justifyContent: \"center\",\n        width: \"20%\",\n        display: \"flex\",\n        alignItems: \"center\"\n      }, __jsx(TiCalendarOutline, {\n        size: \"27\",\n        color: this.state.route === \"event\" ? \"#59a5d8\" : \"#8e8e8e\",\n        onClick: function onClick(e) {\n          return _this4.changeRoute('event');\n        }\n      })), __jsx(Box, {\n        justifyContent: \"center\",\n        width: \"20%\",\n        display: \"flex\",\n        alignItems: \"center\"\n      }, __jsx(TiTags, {\n        size: \"27\",\n        color: this.state.route === \"mission\" ? \"#59a5d8\" : \"#8e8e8e\",\n        onClick: function onClick(e) {\n          return _this4.changeRoute('mission');\n        }\n      })), __jsx(Box, {\n        justifyContent: \"center\",\n        width: \"20%\",\n        display: \"flex\",\n        alignItems: \"center\"\n      }, __jsx(TiShoppingCart, {\n        size: \"27\",\n        color: this.state.route === \"shopping\" ? \"#59a5d8\" : \"#8e8e8e\",\n        onClick: function onClick(e) {\n          return _this4.changeRoute('shopping');\n        }\n      }))));\n    }\n  }]);\n\n  return Main;\n}(React.Component);\n\nexport default Main;","map":null,"metadata":{},"sourceType":"module"}